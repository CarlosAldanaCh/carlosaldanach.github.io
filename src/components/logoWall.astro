---
/**
 * LogoWall.astro (Simple Icons CDN)
 * - Uses https://cdn.simpleicons.org/<slug>/<color>
 * - Fallback if an icon fails
 * - Infinite scroll + pause on hover
 */

type Tech = {
  label: string;
  slug: string; // SimpleIcons slug
};

const ACCENT = "A476FF";

const technologies: Tech[] = [
  // Data Science / ML core
  { label: "Python", slug: "python" },
  { label: "Pandas", slug: "pandas" },
  { label: "NumPy", slug: "numpy" },
  { label: "scikit-learn", slug: "scikitlearn" },
  { label: "Jupyter", slug: "jupyter" },

  // Modeling 
  { label: "TensorFlow", slug: "tensorflow" },
  { label: "PyTorch", slug: "pytorch" },
  { label: "Hugging Face", slug: "huggingface" },
  { label: "LightGBM", slug: "lightgbm" },
  { label: "CatBoost", slug: "catboost" },

  // Data / Dev
  { label: "PostgreSQL", slug: "postgresql" },
  { label: "Git", slug: "git" },
  { label: "GitHub", slug: "github" },
];

const items = [...technologies, ...technologies, ...technologies];

const iconUrl = (slug: string) => `https://cdn.simpleicons.org/${slug}/${ACCENT}`;
---

<div class="relative overflow-x-hidden py-8">
  <div
    class="pointer-events-none absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-[var(--background)] to-transparent z-20"
  ></div>
  <div
    class="pointer-events-none absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-[var(--background)] to-transparent z-20"
  ></div>

  <div class="flex animate-scroll hover:animate-paused gap-12 md:gap-20 w-max">
    {
      items.map((tech) => (
        <div class="flex items-center gap-3 group transition-all duration-300">
          <img
            src={iconUrl(tech.slug)}
            alt={tech.label}
            class="h-7 w-7 object-contain transition-transform group-hover:scale-110 opacity-70"
            width="28"
            height="28"
            loading="lazy"
            onerror="this.style.display='none'; this.nextElementSibling && (this.nextElementSibling.style.display='inline-flex');"
          />

          <span
            class="hidden size-2 rounded-full bg-[var(--sec)] shadow-[0_0_12px_rgba(164,118,255,.35)]"
            aria-hidden="true"
          ></span>

          <span class="text-lg font-medium text-[var(--white-icon)]">
            {tech.label}
          </span>
        </div>
      ))
    }
  </div>
</div>

<style is:global>
  @keyframes scroll {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
  }

  .animate-scroll {
    animation: scroll 60s linear infinite;
  }

  .hover\:animate-paused:hover {
    animation-play-state: paused;
  }

  @media (min-width: 768px) {
    .animate-scroll { animation-duration: 50s; }
  }
</style>
